webpackJsonp([1],{"+qSV":function(t,e,n){"use strict";var i=n("A//x"),a=n("ko1L"),o=n("VU/8"),r=o(i.a,a.a,!1,null,null,null);e.a=r.exports},0:function(t,e){},"4rHP":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"search"}},[n("p",[t._v("search museum in this page.")]),t._v(" "),n("p",[t._v("latitude: "+t._s(t.latitude))]),t._v(" "),n("p",[t._v("longitude: "+t._s(t.longitude))]),t._v(" "),t.myposition?n("p"):t._e(),t._v(" "),t.weather?n("p",[n("ul",[n("li",[t._v("description: "+t._s(t.weather.description))]),t._v(" "),n("li",[t._v("temp: "+t._s(t.weather.temp))]),t._v(" "),n("li",[t._v("wind: "+t._s(t.weather.wind))]),t._v(" "),n("li",[t._v("humidity: "+t._s(t.weather.humidity))]),t._v(" "),n("li",[t._v("visibility: "+t._s(t.weather.visibility))]),t._v(" "),n("li",[t._v("sunrise: "+t._s(t.weather.sunrise))]),t._v(" "),n("li",[t._v("sunset: "+t._s(t.weather.sunset))])])]):t._e()])},a=[],o={render:i,staticRenderFns:a};e.a=o},"A//x":function(t,e,n){"use strict";e.a={name:"Predict",data:function(){return{text:"",audioUrl:"",videoUrl:"",isRequesting:!1,error:"",photourl:"",results:[]}},created:function(){console.log("predict created")},beforeRouteUpdate:function(t,e,n){console.log("before route update:"+t.fullPath);var i=t.fullPath.indexOf("?");if(i>0){"takephoto"===_.chain(t.fullPath.substr(i+1)).replace("?","").split("&").map(_.ary(_.partial(_.split,_,"="),1)).fromPairs().value().action&&(console.log("launch camera"),this.takePhoto())}n()},methods:{takePhoto:function(){this.photourl="",navigator.camera.getPicture(this.onTakePhotoSuccess,this.onTakePhotoFail,{quality:50,destinationType:Camera.DestinationType.DATA_URL,encodingType:Camera.EncodingType.JPEG,sourceType:Camera.PictureSourceType.CAMERA})},onTakePhotoSuccess:function(t){var e=this;this.photourl="data:image/jpeg;base64,"+t,this.isRequesting=!0,this.text="",axios.post("http://www.aitour.ml/predict",qs.stringify({image:this.photourl,limits:0})).then(function(t){console.log("aitourscene:"+t.data),t.data.error?e.error=t.data.error:e.results=t.data.results,e.isRequesting=!1}).catch(function(t){this.isRequesting=!1,alert(t)})},onTakePhotoFail:function(t){alert("Failed because: "+t)},displayText:function(t){this.results.length>t&&(this.text=this.results[t].text,this.audioUrl=this.results[t].audio_url,this.videoUrl=this.results[t].video_url)}}}},Ck0u:function(t,e,n){"use strict";var i=n("PxWK"),a=n("E4lv"),o=n("VU/8"),r=o(i.a,a.a,!1,null,null,null);e.a=r.exports},D4uH:function(t,e,n){"use strict";function i(t){n("VIvl")}var a=n("dXrS"),o=n("ZT8t"),r=n("VU/8"),s=i,u=r(a.a,o.a,!1,s,null,null);e.a=u.exports},"Du/2":function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return o});var i="UPDATE_GEOLOCATION",a="UPDATE_WEATHER",o="SET_PAGE"},E4lv:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",[n("ul",[n("li",[n("icon",{class:{active:t.ispage("/predict")},attrs:{name:"question-circle-o",scale:"1.5"},nativeOn:{click:function(e){t.topage("/predict")}}})],1),t._v(" "),n("li",[n("icon",{class:{active:t.ispage("/search")},attrs:{name:"search",scale:"1.5"},nativeOn:{click:function(e){t.topage("/search")}}})],1),t._v(" "),n("li",[n("icon",{class:{active:t.ispage("/profile")},attrs:{name:"user-o",scale:"1.5"},nativeOn:{click:function(e){t.topage("/profile")}}})],1)])])},a=[],o={render:i,staticRenderFns:a};e.a=o},Eg00:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-view",{staticClass:"routerview"})],1)},a=[],o={render:i,staticRenderFns:a};e.a=o},IcnI:function(t,e,n){"use strict";var i,a=n("bOdI"),o=n.n(a),r=n("7+uW"),s=n("NYxO"),u=n("Du/2");r.a.use(s.a);var c={page:"",weather:{},geo:{latitude:0,longitude:0}},l={latitude:function(t){return t.geo.latitude},longitude:function(t){return t.geo.longitude},page:function(t){return t.page}},d={updategeo:function(t,e){var n=t.commit;t.state;n(u.b,{latitude:e.coords.latitude,longitude:e.coords.longitude})},updateweather:function(t,e){var n=t.commit;t.state;n(u.c,e)},setpage:function(t,e){var n=t.commit;t.state;n(u.a,{page:e})}},h=(i={},o()(i,u.b,function(t,e){var n=e.latitude,i=e.longitude;t.geo={latitude:n,longitude:i}}),o()(i,u.c,function(t,e){t.weather=e}),o()(i,u.a,function(t,e){var n=e.page;t.page=n}),i);e.a=new s.a.Store({state:c,actions:d,getters:l,mutations:h})},M93x:function(t,e,n){"use strict";var i=n("xJD8"),a=n("cZ4a"),o=n("VU/8"),r=o(i.a,a.a,!1,null,null,null);e.a=r.exports},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),a=n("M93x"),o=n("YaEn"),r=(n("D/PP"),n("D4uH")),s=n("IcnI");n("kBzv"),i.a.component("icon",r.a),n("nYAk"),n("hKoQ").polyfill(),i.a.config.productionTip=!1;var u=-1,c=function(){-1==u&&(u=navigator.geolocation.watchPosition(function(t){console.log(t),s.a.dispatch("updategeo",t),l(t.coords.latitude,t.coords.longitude)},function(t){console.log("get geoposition error:"+t.message),alert("get geoposition error:"+t.message)},{timeout:3e4,enableHighAccuracy:!0,maximumAge:75e3}))},l=function(t,e){var n="http://api.openweathermap.org/data/2.5/weather?lat="+t+"&lon="+e+"&appid=f582f8a21b3b8b3f0f20a8a01789f217&units=imperial";axios.get(n).then(function(t){if(200==t.status){var e=t.data;e.weather.length&&s.a.dispatch("updateweather",{description:e.name,temp:e.main.temp,wind:e.wind.speed,humidity:e.main.humidity,visibility:e.weather[0].main,sunrise:new Date(e.sys.sunrise).toLocaleTimeString(),sunset:new Date(e.sys.sunset).toLocaleTimeString()})}}).catch(function(t){alert("get weather error:"+t)})};document.addEventListener("deviceready",function(){console.log(device.cordova),new i.a({el:"#app",store:s.a,router:o.a,template:"<App/>",components:{App:a.a}}),c()},!1),document.addEventListener("resume",function(){console.log("app resumed"),c()},!1),document.addEventListener("pause",function(){console.log("app paused"),navigator.geolocation.clearWatch(u),u=-1},!1)},PxWK:function(t,e,n){"use strict";n("NYxO");e.a={name:"navFooter",data:function(){return{}},methods:{topage:function(t){this.$router.push({path:t})},ispage:function(t){return this.$store.state.page.indexOf(t)>=0}},computed:{page:function(){return this.$store.state.page}}}},Uhku:function(t,e){},VIvl:function(t,e){},YT4d:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"login"}},[n("div",{staticClass:"wrap"},[n("div",{staticClass:"row"},[n("svg",{staticClass:"icon name svg-icon",attrs:{viewBox:"0 0 20 20"}},[n("path",{attrs:{d:"M0,20 a10,8 0 0,1 20,0z M10,0 a4,4 0 0,1 0,8 a4,4 0 0,1 0,-8"}})]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input name",attrs:{type:"text",placeholder:"Username"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"row"},[n("svg",{staticClass:"icon pass svg-icon",attrs:{viewBox:"0 0 20 20"}},[n("path",{attrs:{d:"M0,20 20,20 20,8 0,8z M10,13 10,16z M4,8 a6,8 0 0,1 12,0"}})]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input pass",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),t.error?n("div",{staticClass:"row"},[t._v("\n\t\t\t"+t._s(t.error)+"\n\t\t")]):t._e(),t._v(" "),n("button",{staticClass:"submit",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.login(e)}}},[t._v("Sign in")]),t._v(" "),t._m(0)])])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"signup"},[t._v("Don't have an account? Â "),n("a",[t._v("Sign up")])])}],o={render:i,staticRenderFns:a};e.a=o},YaEn:function(t,e,n){"use strict";var i=n("7+uW"),a=n("/ocq"),o=n("s6+2"),r=n("xJsL"),s=n("+qSV"),u=n("lj5C"),c=n("o9cx"),l=(n("Ck0u"),n("IcnI"));i.a.use(a.a);var d=new a.a({routes:[{path:"/",component:o.a,children:[{path:"",component:s.a},{path:"predict",component:s.a},{path:"profile",component:c.a,meta:{requiresAuth:!0}},{path:"search",component:u.a}]},{path:"/login",name:"Login",component:r.a}]});d.beforeEach(function(t,e,n){var i=localStorage.getItem("authToken");t.matched.some(function(t){return t.meta.requiresAuth})&&!i?(l.a.dispatch("setpage","/login"),n({path:"/login",query:{redirect:t.fullPath}})):(l.a.dispatch("setpage",t.fullPath),n())}),e.a=d},ZT8t:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{class:t.clazz,style:t.style,attrs:{version:"1.1",role:t.label?"img":"presentation","aria-label":t.label,x:t.x,y:t.y,width:t.width,height:t.height,viewBox:t.box}},[t._t("default",[t.icon&&t.icon.paths?t._l(t.icon.paths,function(e){return n("path",t._b({},"path",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.polygons?t._l(t.icon.polygons,function(e){return n("polygon",t._b({},"polygon",e,!1))}):t._e(),t._v("\b\n    "),t.icon&&t.icon.raw?[n("g",{domProps:{innerHTML:t._s(t.icon.raw)}})]:t._e()])],2)},a=[],o={render:i,staticRenderFns:a};e.a=o},cZ4a:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("header",[n("icon",{attrs:{id:"selmuseum",name:"bars",scale:"1.5"},nativeOn:{click:function(e){t.selMuseum(e)}}}),t._v(" "),n("span",[t._v("Boston Fine Art")]),t._v(" "),n("icon",{attrs:{id:"takephoto",name:"camera",scale:"1.5"},nativeOn:{click:function(e){t.takePhoto(e)}}})],1),t._v(" "),n("div",{attrs:{id:"contentview"}},[n("router-view")],1),t._v(" "),n("nav-footer")],1)},a=[],o={render:i,staticRenderFns:a};e.a=o},dV1u:function(t,e,n){"use strict";e.a={name:"SearchMuseum",data:function(){return{myposition:""}},computed:{latitude:function(){return this.$store.state.geo.latitude},longitude:function(){return this.$store.state.geo.longitude},weather:function(){return this.$store.state.weather}}}},dXrS:function(t,e,n){"use strict";var i=n("7+uW"),a={};e.a={name:"icon",props:{name:{type:String,validator:function(t){return t?t in a||(i.a.util.warn('Invalid prop: prop "icon" is referring to an unregistered icon "'+t+'".\nPlesase make sure you have imported this icon before using it.',this),!1):null}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(t){return"horizontal"===t||"vertical"===t}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(i.a.util.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},clazz:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse}},icon:function(){return this.name?a[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var t=this.icon,e=t.width,n=t.height;return Math.max(e,n)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}}},mounted:function(){var t=this;if(!this.icon){this.$children.forEach(function(e){e.outerScale=t.normalizedScale});var e=0,n=0;this.$children.forEach(function(t){e=Math.max(e,t.width),n=Math.max(n,t.height)}),this.childrenWidth=e,this.childrenHeight=n,this.$children.forEach(function(t){t.x=(e-t.width)/2,t.y=(n-t.height)/2})}},register:function(t){for(var e in t){var n=t[e];n.paths||(n.paths=[]),n.d&&n.paths.push({d:n.d}),n.polygons||(n.polygons=[]),n.points&&n.polygons.push({points:n.points}),a[e]=n}},icons:a}},kBzv:function(t,e,n){window._=n("M4fF");try{window.$=window.jQuery=n("7t+N"),n("jf49")}catch(t){}window.axios=n("mtWM"),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",window.axios.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",window.qs=n("mw3O")},ko1L:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"predict"}},[t.isRequesting?n("div",{attrs:{id:"loading"}},[n("icon",{attrs:{name:"refresh",spin:""}}),t._v(" computing...\n\t")],1):t._e(),t._v(" "),n("div",{attrs:{id:"detail"}},[t.photourl&&0==t.text.length?n("img",{attrs:{id:"srcphoto",src:t.photourl}}):t._e(),t._v(" "),t.text?n("p",[t._v(t._s(t.text))]):t._e(),t.audioUrl?n("p",[n("audio",{attrs:{id:"paudio",controls:"controls",src:t.audioUrl}})]):t._e(),t._v(" "),t.videoUrl?n("p",[t._v(t._s(t.videoUrl))]):t._e()]),t._v(" "),t.results.length>0?n("div",{attrs:{id:"results"}},[n("ul",t._l(t.results,function(e,i){return n("li",[n("img",{attrs:{src:e.image_url},on:{click:function(e){t.displayText(i)}}})])}))]):n("span",[t._v("please try take a photo ^_^")])])},a=[],o={render:i,staticRenderFns:a};e.a=o},lj5C:function(t,e,n){"use strict";var i=n("dV1u"),a=n("4rHP"),o=n("VU/8"),r=o(i.a,a.a,!1,null,null,null);e.a=r.exports},"nKb+":function(t,e,n){"use strict";var i=n("YaEn");e.a={name:"Login",data:function(){return{error:"",name:"",password:""}},methods:{login:function(){if("123"==this.name){localStorage.setItem("authToken","temptoken"),this.error="";var t=this.$route.query.redirect;console.log("you are login, forward to:"),console.log(this.$route),i.a.replace(t)}else this.error="invalid username or password"},cancel:function(){i.a.replace("/")}}}},nYAk:function(t,e){},o9cx:function(t,e,n){"use strict";var i=n("yoF/"),a=n("oZQf"),o=n("VU/8"),r=o(i.a,a.a,!1,null,null,null);e.a=r.exports},oZQf:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"profile"}},[t._v("\n\thello @@\n\n\t"),n("p",[n("a",{on:{click:function(e){e.preventDefault(),t.signOut(e)}}},[t._v("sign out")])])])},a=[],o={render:i,staticRenderFns:a};e.a=o},"s6+2":function(t,e,n){"use strict";var i=n("Uhku"),a=n.n(i),o=n("Eg00"),r=n("VU/8"),s=r(a.a,o.a,!1,null,null,null);e.a=s.exports},xJD8:function(t,e,n){"use strict";var i=n("Ck0u");e.a={name:"app",components:{"nav-footer":i.a},methods:{takePhoto:function(){this.$router.push({path:"predict",query:{action:"takephoto",random:Math.random(),time:Date.now()}})},selMuseum:function(){console.log("selMuseum")}}}},xJsL:function(t,e,n){"use strict";var i=n("nKb+"),a=n("YT4d"),o=n("VU/8"),r=o(i.a,a.a,!1,null,null,null);e.a=r.exports},"yoF/":function(t,e,n){"use strict";e.a={name:"Profile",data:function(){return{}},methods:{signOut:function(){localStorage.removeItem("authToken"),this.$router.push({path:"predict"})}}}}},["NHnr"]);
//# sourceMappingURL=app.d259365117461fd3b5b8.js.map